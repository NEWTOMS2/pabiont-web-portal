"use strict";(self.webpackChunkpabiont_web_portal=self.webpackChunkpabiont_web_portal||[]).push([[842],{9842:(T,d,c)=>{c.r(d),c.d(d,{InvoiceManagementModule:()=>ie});var u=c(9808),m=c(7330),v=c(5861),e=c(5e3),l=c(3075);class f{constructor(o,t){this.invoice_number=o,this.status=t}}var g=c(8253),r=c(9783),b=c(1424),_=c(4036);function Z(n,o){1&n&&(e.TgZ(0,"small",12),e._uU(1,"El estatus es obligatorio."),e.qZA())}const I=function(n){return{"ng-dirty ng-invalid":n}};let M=(()=>{class n{constructor(t,a,i){this.formBuilder=t,this.invoiceManagementService=a,this.messageService=i,this.statusList=[{label:"Pagada",value:11},{label:"Cancelada",value:12}],this.updateList=new e.vpe,this.buttonEnabled=new e.vpe,this.resetForm()}ngOnInit(){}resetForm(){this.formGroup=this.formBuilder.group({invoice_number:["",l.kI.required],date:["",l.kI.required],status:["",l.kI.required],name:["",l.kI.required]}),this.formGroup.statusChanges.subscribe(t=>{this.buttonEnabled.emit("VALID"==t)})}submit(){this.invoiceRow=new f(this.formGroup.controls.invoice_number.value,this.formGroup.controls.status.value.value),this.invoiceManagementService.changeInvoice(this.invoiceRow).subscribe(t=>{this.messageService.add({severity:"success",summary:"Estatus de la Factura modificado correctamente.",detail:""}),this.updateList.emit()},t=>{this.messageService.add({severity:"error",summary:"Ha ocurrido un error al modificar el Estatus de la Factura.",detail:""}),console.log(t)})}updateForm(t){console.log(t),this.formGroup.controls.status.setValue(this.statusList.find(a=>t.status==a.label)),this.formGroup.controls.invoice_number.setValue(t.invoice_number),this.formGroup.controls.date.setValue(t.date),this.formGroup.controls.name.setValue(t.name),this.formGroup.controls.invoice_number.disable(),this.formGroup.controls.date.disable(),this.formGroup.controls.name.disable()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(g.d),e.Y36(r.ez))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-form"]],outputs:{updateList:"updateList",buttonEnabled:"buttonEnabled"},decls:20,vars:6,consts:[[3,"formGroup"],[1,"row","p-formgrid","p-grid","mt-3"],[1,"p-field","col-6"],["for","Invoice_number"],["type","text","id","Invoice_number","pInputText","","formControlName","invoice_number"],["for","Status"],["optionLabel","label","styleClass","w-100","appendTo","body","placeholder","Selecciona el Estatus","formControlName","status",3,"options","ngClass"],["class","p-error",4,"ngIf"],["for","Date"],["type","text","id","Fecha","pInputText","","formControlName","date"],["for","Name"],["type","text","id","Name","pInputText","","formControlName","name"],[1,"p-error"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),e._uU(4,"N\xfamero de Factura"),e.qZA(),e._UZ(5,"input",4),e.qZA(),e.TgZ(6,"div",2)(7,"label",5),e._uU(8,"Estatus"),e.qZA(),e._UZ(9,"p-dropdown",6),e.YNc(10,Z,2,0,"small",7),e.qZA()(),e.TgZ(11,"div",1)(12,"div",2)(13,"label",8),e._uU(14,"Fecha"),e.qZA(),e._UZ(15,"input",9),e.qZA(),e.TgZ(16,"div",2)(17,"label",10),e._uU(18,"Remitente"),e.qZA(),e._UZ(19,"input",11),e.qZA()()()),2&t&&(e.Q6J("formGroup",a.formGroup),e.xp6(9),e.Q6J("options",a.statusList)("ngClass",e.VKq(4,I,a.formGroup.controls.status.touched&&(null==a.formGroup.controls.status.errors?null:a.formGroup.controls.status.errors.required))),e.xp6(1),e.Q6J("ngIf",a.formGroup.controls.status.touched&&(null==a.formGroup.controls.status.errors?null:a.formGroup.controls.status.errors.required)))},directives:[l._Y,l.JL,l.sg,l.Fj,b.o,l.JJ,l.u,_.Lt,u.mk,u.O5],styles:[""]}),n})();var k=c(6456),A=c(135),x=c(7773),w=c(3833),E=c(5315),h=c(845);class P{constructor(o,t){this.package_code=o,this.status=t}}var p=c(4851);function L(n,o){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Factura"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Tama\xf1o"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Peso"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Volumen"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Tipo de Env\xedo"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Estatus"),e.qZA(),e._UZ(13,"th",3),e.qZA())}function y(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw(2);e.hij(" ",t.invoice," ")}}function R(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw(2);e.hij(" ",t.invoice," ")}}function N(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.size," ")}}function F(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.size," ")}}function U(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.weight," ")}}function J(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.weight," ")}}function Y(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.volume," ")}}function D(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.volume," ")}}function S(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.type," ")}}function q(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.type," ")}}function B(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"p-dropdown",12),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().$implicit.status=i}),e.qZA()}if(2&n){const t=e.oxw().$implicit,a=e.oxw();e.Q6J("options",a.statusList)("ngModel",t.status)}}function G(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.status," ")}}function H(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onRowEditInit()}),e.qZA()}}function V(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().onRowEditSave(i)}),e.qZA()}}function z(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),s=i.$implicit,C=i.rowIndex;return e.oxw().onRowEditCancel(s,C)}),e.qZA()}}function O(n,o){if(1&n&&(e.TgZ(0,"tr",4)(1,"td",5)(2,"p-cellEditor"),e.YNc(3,y,1,1,"ng-template",6),e.YNc(4,R,1,1,"ng-template",7),e.qZA()(),e.TgZ(5,"td",5)(6,"p-cellEditor"),e.YNc(7,N,1,1,"ng-template",6),e.YNc(8,F,1,1,"ng-template",7),e.qZA()(),e.TgZ(9,"td",5)(10,"p-cellEditor"),e.YNc(11,U,1,1,"ng-template",6),e.YNc(12,J,1,1,"ng-template",7),e.qZA()(),e.TgZ(13,"td",5)(14,"p-cellEditor"),e.YNc(15,Y,1,1,"ng-template",6),e.YNc(16,D,1,1,"ng-template",7),e.qZA()(),e.TgZ(17,"td",5)(18,"p-cellEditor"),e.YNc(19,S,1,1,"ng-template",6),e.YNc(20,q,1,1,"ng-template",7),e.qZA()(),e.TgZ(21,"td",5)(22,"p-cellEditor"),e.YNc(23,B,1,2,"ng-template",6),e.YNc(24,G,1,1,"ng-template",7),e.qZA()(),e.TgZ(25,"td",8),e.YNc(26,H,1,0,"button",9),e.YNc(27,V,1,0,"button",10),e.YNc(28,z,1,0,"button",11),e.qZA()()),2&n){const a=o.editing;e.Q6J("pEditableRow",o.$implicit),e.xp6(26),e.Q6J("ngIf",!a),e.xp6(1),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("ngIf",a)}}let Q=(()=>{class n{constructor(t,a){this.invoiceManagementService=t,this.messageService=a,this.canEdit=!1,this.updateList=new e.vpe,this.statusList=[{label:"En Tienda",value:"En Tienda"},{label:"En Almac\xe9n",value:"En Almac\xe9n"},{label:"En Cami\xf3n",value:"En Cami\xf3n"},{label:"En Avi\xf3n",value:"En Avi\xf3n"},{label:"En Embarcaci\xf3n",value:"En Embarcaci\xf3n"},{label:"En el Puerto en Venezuela",value:"En el Puerto en Venezuela"},{label:"En Aduana en Venezuela",value:"En Aduana en Venezuela"},{label:"En Ruta al Almac\xe9n en Venezuela",value:"En Ruta al Almac\xe9n en Venezuela"},{label:"Entregado a Tienda en Venezuela",value:"Entregado a Tienda en Venezuela"},{label:"Entregado",value:"Entregado"}]}ngOnInit(){}onRowEditInit(){this.canEdit=!0}onRowEditSave(t){this.packageRow=new P(parseInt(t.code),this.setStatusValue(t.status)),this.invoiceManagementService.changePackage(this.packageRow).subscribe(a=>{this.messageService.add({severity:"success",summary:"Estatus del paquete modificado correctamente.",detail:""}),this.updateList.emit()},a=>{this.messageService.add({severity:"error",summary:"Ha ocurrido un error al modificar el Estatus del paquete.",detail:""}),console.log(a)})}onRowEditCancel(t,a){window.location.reload()}setStatusValue(t){switch(t){case"En Tienda":return 1;case"En Almac\xe9n":return 2;case"En Cami\xf3n":return 3;case"En Avi\xf3n":return 4;case"En Embarcaci\xf3n":return 5;case"En el Puerto en Venezuela":return 6;case"En Aduana en Venezuela":return 7;case"En Ruta al Almac\xe9n en Venezuela":return 8;case"Entregado a Tienda en Venezuela":return 9;case"Entregado":return 10;default:return 0}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.d),e.Y36(r.ez))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-package-management"]],inputs:{packageList:"packageList",invoice:"invoice"},outputs:{updateList:"updateList"},decls:4,vars:1,consts:[["dataKey","code","editMode","row",3,"value"],["pTemplate","header"],["pTemplate","body"],[2,"width","8rem"],[3,"pEditableRow"],["pEditableColumn",""],["pTemplate","input"],["pTemplate","output"],[2,"text-align","center"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success p-mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["styleClass","w-100","appendTo","body",3,"options","ngModel","ngModelChange"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","p-mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div")(1,"p-table",0),e.YNc(2,L,14,0,"ng-template",1),e.YNc(3,O,29,4,"ng-template",2),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("value",a.packageList))},directives:[p.iA,r.jx,p.D$,p.Wq,p.YL,_.Lt,l.JJ,l.On,u.O5,h.Hq,p.Pv,p.U1,p.wT],styles:[""]}),n})();function j(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).hideDialog()}),e.qZA(),e.TgZ(1,"button",12),e.NdJ("click",function(){e.CHM(t),e.oxw();const i=e.MAs(3);return e.oxw().hideDialog(),i.submit()}),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",!t.buttonIsEnabled)}}const $=function(){return{width:"450px"}};function K(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"p-dialog",7),e.NdJ("visibleChange",function(i){return e.CHM(t),e.oxw().visibleDialog=i})("onHide",function(){return e.CHM(t),e.MAs(3).resetForm()}),e.TgZ(2,"app-create-form",8,9),e.NdJ("buttonEnabled",function(i){return e.CHM(t),e.oxw().buttonEnabled(i)})("updateList",function(){return e.CHM(t),e.oxw().getInvoiceList()}),e.qZA(),e.YNc(4,j,2,1,"ng-template",10),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Akn(e.DdM(4,$)),e.Q6J("visible",t.visibleDialog)("modal",!0)}}function W(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).hideDialog()}),e.qZA()}}const X=function(){return{width:"950px"}};function ee(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"p-dialog",13),e.NdJ("visibleChange",function(i){return e.CHM(t),e.oxw().visibleDialog=i})("onHide",function(){return e.CHM(t),e.oxw().hideDialog2()}),e.TgZ(2,"app-package-management",14),e.NdJ("updateList",function(){e.CHM(t);const i=e.oxw();return i.getPackagesList(i.invoiceCode)}),e.qZA(),e.YNc(3,W,1,0,"ng-template",10),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Akn(e.DdM(6,X)),e.Q6J("visible",t.visibleDialog)("modal",!0),e.xp6(1),e.Q6J("packageList",t.packageList)("invoice",t.invoiceCode)}}const te=[{path:"",component:(()=>{class n{constructor(t,a,i,s){this.appConfig=t,this.tableManagmentService=a,this.invoiceManagementService=i,this.router=s,this.visibleDialog=!1,this.buttonIsEnabled=!1,this.invoiceList=[],this.currentStep=-1,this.modalTitle="",this.page=this.appConfig.invoiceManagement,this.page=this.page.default,this.getInvoiceList(),this.tableManagmentService.buttonEvent.subscribe(C=>{this.selectedButton(C)})}ngOnInit(){}getInvoiceList(){var t=this;return(0,v.Z)(function*(){t.invoiceList=yield t.invoiceManagementService.getInvoices().toPromise().then(a=>a)})()}getPackagesList(t){var a=this;return(0,v.Z)(function*(){a.packageList=yield a.invoiceManagementService.getPackages(t).toPromise().then(i=>i)})()}buttonEnabled(t){this.buttonIsEnabled=t}selectedButton(t){switch(this.visibleDialog=!0,this.currentStep=t.buttonId,t.buttonId){case 1:this.child.updateForm(t.rowData);break;case 2:this.invoiceCode=t.rowData.invoice_number,this.getPackagesList(t.rowData.invoice_number)}}hideDialog(){this.visibleDialog=!1}hideDialog2(){this.visibleDialog=!1,window.location.reload()}redirect(){this.router.navigate(["main"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(k._),e.Y36(A.l),e.Y36(g.d),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-invoice-management"]],viewQuery:function(t,a){if(1&t&&e.Gf(M,5),2&t){let i;e.iGM(i=e.CRH())&&(a.child=i.first)}},decls:10,vars:7,consts:[[1,"row","p-5","m-0"],[1,"title"],[1,"pabiont-card"],[3,"headerList","customButtons","dataList","searchField","canCreate"],[4,"ngIf"],[1,"d-flex","justify-content-start","px-5","mb-3"],["pButton","","pRipple","","label","Volver",1,"p-button-outlined",3,"click"],["header","Modificar Estatus de Factura","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],[3,"buttonEnabled","updateList"],["child",""],["class","m-0","pTemplate","footer"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text","p-button-danger",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],["header","Modificar Estatus de Paquetes","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],[3,"packageList","invoice","updateList"],["pButton","","pRipple","","label","Continuar","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0)(2,"span",1),e._uU(3,"Gesti\xf3n de Facturas y Paquetes"),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"app-basic-table",3),e.qZA()(),e.YNc(6,K,5,5,"div",4),e.YNc(7,ee,4,7,"div",4),e.TgZ(8,"div",5)(9,"button",6),e.NdJ("click",function(){return a.redirect()}),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("headerList",a.page.tableConfiguration.headerList)("customButtons",a.page.tableConfiguration.customButtons)("dataList",a.invoiceList)("searchField",a.page.tableConfiguration.searchField)("canCreate",!0),e.xp6(1),e.Q6J("ngIf",2!=a.currentStep),e.xp6(1),e.Q6J("ngIf",2==a.currentStep))},directives:[x.FN,w.N,u.O5,E.V,M,r.jx,h.Hq,Q],styles:[".title[_ngcontent-%COMP%]{font-weight:600;font-size:32px;line-height:27px;color:#000;margin-bottom:48px}.pabiont-card[_ngcontent-%COMP%]{border-radius:20px;border:2px solid rgba(0,0,0,.05);box-shadow:0 4px 4px #00000040}"]}),n})()}];let ne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.Bz.forChild(te)],m.Bz]}),n})();var ae=c(732),oe=c(8641);let ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,ne,ae.T,h.hJ,b.j,E.S,l.UX,_.kW,p.U$,l.u5,oe.R,x.EV]]}),n})()},8641:(T,d,c)=>{c.d(d,{R:()=>g});var u=c(9808),m=c(845),v=c(3075),e=c(1424),l=c(7010),f=c(5e3);let g=(()=>{class r{}return r.\u0275fac=function(_){return new(_||r)},r.\u0275mod=f.oAB({type:r}),r.\u0275inj=f.cJS({imports:[[u.ez,m.hJ,e.j,l.L$,v.UX]]}),r})()}}]);