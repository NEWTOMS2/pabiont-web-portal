"use strict";(self.webpackChunkpabiont_web_portal=self.webpackChunkpabiont_web_portal||[]).push([[473],{473:(ae,d,c)=>{c.r(d),c.d(d,{InvoiceManagementModule:()=>te});var r=c(9808),v=c(7330),f=c(5861),e=c(5e3),l=c(3075);class T{constructor(o,t){this.invoice_number=o,this.status=t}}var u=c(4004),k=c(3447),b=c(8622);let m=(()=>{class n{constructor(t,a){this.httpService=t,this.appConfig=a}changeInvoice(t){return this.httpService.patch(`${this.appConfig.config.url.changeInvoice}`,t).pipe((0,u.U)(a=>a.data))}getInvoices(){return this.httpService.get(`${this.appConfig.config.url.getInvoice}`).pipe((0,u.U)(t=>t.data))}getPackages(t){return this.httpService.get(`${this.appConfig.config.url.getPackageByInvoice}${t}`).pipe((0,u.U)(a=>a.data))}changePackage(t){return this.httpService.patch(`${this.appConfig.config.url.changeStatusPackage}`,t).pipe((0,u.U)(a=>a.data))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(k.O),e.LFG(b._))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=c(1424),g=c(4036);function I(n,o){1&n&&(e.TgZ(0,"small",12),e._uU(1,"El estatus es obligatorio."),e.qZA())}const E=function(n){return{"ng-dirty ng-invalid":n}};let C=(()=>{class n{constructor(t,a){this.formBuilder=t,this.invoiceManagementService=a,this.statusList=[{label:"Pagada",value:11},{label:"Cancelada",value:12}],this.updateList=new e.vpe,this.buttonEnabled=new e.vpe,this.resetForm()}ngOnInit(){}resetForm(){this.formGroup=this.formBuilder.group({invoice_number:["",l.kI.required],date:["",l.kI.required],status:["",l.kI.required],name:["",l.kI.required]}),this.formGroup.statusChanges.subscribe(t=>{this.buttonEnabled.emit("VALID"==t)})}submit(){this.invoiceRow=new T(this.formGroup.controls.invoice_number.value,this.formGroup.controls.status.value.value),this.invoiceManagementService.changeInvoice(this.invoiceRow).subscribe(t=>{this.updateList.emit()},t=>{console.log(t)})}updateForm(t){console.log(t),this.formGroup.controls.status.setValue(this.statusList.find(a=>t.status==a.label)),this.formGroup.controls.invoice_number.setValue(t.invoice_number),this.formGroup.controls.date.setValue(t.date),this.formGroup.controls.name.setValue(t.name),this.formGroup.controls.invoice_number.disable(),this.formGroup.controls.date.disable(),this.formGroup.controls.name.disable()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-form"]],outputs:{updateList:"updateList",buttonEnabled:"buttonEnabled"},decls:20,vars:6,consts:[[3,"formGroup"],[1,"row","p-formgrid","p-grid","mt-3"],[1,"p-field","col-6"],["for","Invoice_number"],["type","text","id","Invoice_number","pInputText","","formControlName","invoice_number"],["for","Status"],["optionLabel","label","styleClass","w-100","appendTo","body","placeholder","Selecciona el estatus","formControlName","status",3,"options","ngClass"],["class","p-error",4,"ngIf"],["for","Date"],["type","text","id","Fecha","pInputText","","formControlName","date"],["for","Name"],["type","text","id","Name","pInputText","","formControlName","name"],[1,"p-error"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),e._uU(4,"Numero de factura"),e.qZA(),e._UZ(5,"input",4),e.qZA(),e.TgZ(6,"div",2)(7,"label",5),e._uU(8,"Estatus"),e.qZA(),e._UZ(9,"p-dropdown",6),e.YNc(10,I,2,0,"small",7),e.qZA()(),e.TgZ(11,"div",1)(12,"div",2)(13,"label",8),e._uU(14,"Fecha"),e.qZA(),e._UZ(15,"input",9),e.qZA(),e.TgZ(16,"div",2)(17,"label",10),e._uU(18,"Remitente"),e.qZA(),e._UZ(19,"input",11),e.qZA()()()),2&t&&(e.Q6J("formGroup",a.formGroup),e.xp6(9),e.Q6J("options",a.statusList)("ngClass",e.VKq(4,E,a.formGroup.controls.status.touched&&(null==a.formGroup.controls.status.errors?null:a.formGroup.controls.status.errors.required))),e.xp6(1),e.Q6J("ngIf",a.formGroup.controls.status.touched&&(null==a.formGroup.controls.status.errors?null:a.formGroup.controls.status.errors.required)))},directives:[l._Y,l.JL,l.sg,l.Fj,h.o,l.JJ,l.u,g.Lt,r.mk,r.O5],styles:[""]}),n})();var Z=c(135),w=c(3833),x=c(5315),M=c(9783),_=c(845);class L{constructor(o,t){this.package_code=o,this.status=t}}var s=c(5516);function A(n,o){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Tama\xf1o"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Peso"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Volumen"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Tipo de Envio"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"estatus"),e.qZA(),e._UZ(11,"th",3),e.qZA())}function y(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.size," ")}}function P(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.size," ")}}function N(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.weight," ")}}function F(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.weight," ")}}function J(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.volume," ")}}function S(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.volume," ")}}function U(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.type," ")}}function R(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.type," ")}}function q(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"p-dropdown",12),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().$implicit.status=i}),e.qZA()}if(2&n){const t=e.oxw().$implicit,a=e.oxw();e.Q6J("options",a.statusList)("ngModel",t.status)}}function Y(n,o){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.status," ")}}function G(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().onRowEditInit(i)}),e.qZA()}}function H(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().onRowEditSave(i)}),e.qZA()}}function $(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),p=i.$implicit,ne=i.rowIndex;return e.oxw().onRowEditCancel(p,ne)}),e.qZA()}}function B(n,o){if(1&n&&(e.TgZ(0,"tr",4)(1,"td",5)(2,"p-cellEditor"),e.YNc(3,y,1,1,"ng-template",6),e.YNc(4,P,1,1,"ng-template",7),e.qZA()(),e.TgZ(5,"td",5)(6,"p-cellEditor"),e.YNc(7,N,1,1,"ng-template",6),e.YNc(8,F,1,1,"ng-template",7),e.qZA()(),e.TgZ(9,"td",5)(10,"p-cellEditor"),e.YNc(11,J,1,1,"ng-template",6),e.YNc(12,S,1,1,"ng-template",7),e.qZA()(),e.TgZ(13,"td",5)(14,"p-cellEditor"),e.YNc(15,U,1,1,"ng-template",6),e.YNc(16,R,1,1,"ng-template",7),e.qZA()(),e.TgZ(17,"td",5)(18,"p-cellEditor"),e.YNc(19,q,1,2,"ng-template",6),e.YNc(20,Y,1,1,"ng-template",7),e.qZA()(),e.TgZ(21,"td",8),e.YNc(22,G,1,0,"button",9),e.YNc(23,H,1,0,"button",10),e.YNc(24,$,1,0,"button",11),e.qZA()()),2&n){const a=o.editing;e.Q6J("pEditableRow",o.$implicit),e.xp6(22),e.Q6J("ngIf",!a),e.xp6(1),e.Q6J("ngIf",a),e.xp6(1),e.Q6J("ngIf",a)}}let V=(()=>{class n{constructor(t){this.invoiceManagementService=t,this.canEdit=!1,this.updateList=new e.vpe,this.statusList=[{label:"En la tienda",value:"En la tienda"},{label:"En el almacen",value:"En el almacen"},{label:"En el cami\xf3n",value:"En el cami\xf3n"},{label:"En el avi\xf3n",value:"En el avi\xf3n"},{label:"En la embarcaci\xf3n",value:"En la embarcaci\xf3n"},{label:"En el puerto de Venezuela",value:"En el puerto de Venezuela"},{label:"En aduanas en Venezuela",value:"En aduanas en Venezuela"},{label:"En camino al almacen en Venezuela",value:"En camino al almacen en Venezuela"},{label:"Entregado a tienda en Venezuela",value:"Entregado a tienda en Venezuela"},{label:"Entregado",value:"Entregado"}]}ngOnInit(){}onRowEditInit(t){this.canEdit=!0,console.log(t)}onRowEditSave(t){this.packageRow=new L(t.code,this.setStatusValue(t.status)),this.invoiceManagementService.changePackage(this.packageRow).subscribe(a=>{this.updateList.emit()},a=>{console.log(a)})}onRowEditCancel(t,a){}setStatusValue(t){switch(t){case"En la tienda":return 1;case"En el almacen":return 2;case"En el cami\xf3n":return 3;case"En el avi\xf3n":return 4;case"En la embarcaci\xf3n":return 5;case"En el puerto de Venezuela":return 6;case"En aduanas en Venezuela":return 7;case"En camino al almacen en Venezuela":return 8;case"Entregado a tienda en Venezuela":return 9;case"Entregado":return 10;default:return 0}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-package-management"]],inputs:{packageList:"packageList"},outputs:{updateList:"updateList"},decls:4,vars:1,consts:[["dataKey","code","editMode","row",3,"value"],["pTemplate","header"],["pTemplate","body"],[2,"width","8rem"],[3,"pEditableRow"],["pEditableColumn",""],["pTemplate","input"],["pTemplate","output"],[2,"text-align","center"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success p-mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["styleClass","w-100","appendTo","body",3,"options","ngModel","ngModelChange"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","p-mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div")(1,"p-table",0),e.YNc(2,A,12,0,"ng-template",1),e.YNc(3,B,25,4,"ng-template",2),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("value",a.packageList))},directives:[s.iA,M.jx,s.D$,s.Wq,s.YL,g.Lt,l.JJ,l.On,r.O5,_.Hq,s.Pv,s.U1,s.wT],styles:[""]}),n})();function z(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).hideDialog()}),e.qZA(),e.TgZ(1,"button",10),e.NdJ("click",function(){e.CHM(t),e.oxw();const i=e.MAs(3);return e.oxw().hideDialog(),i.submit()}),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",!t.buttonIsEnabled)}}const Q=function(){return{width:"450px"}};function D(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"p-dialog",5),e.NdJ("visibleChange",function(i){return e.CHM(t),e.oxw().visibleDialog=i})("onHide",function(){return e.CHM(t),e.MAs(3).resetForm()}),e.TgZ(2,"app-create-form",6,7),e.NdJ("buttonEnabled",function(i){return e.CHM(t),e.oxw().buttonEnabled(i)})("updateList",function(){return e.CHM(t),e.oxw().getInvoiceList()}),e.qZA(),e.YNc(4,z,2,1,"ng-template",8),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Akn(e.DdM(4,Q)),e.Q6J("visible",t.visibleDialog)("modal",!0)}}function j(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).hideDialog()}),e.qZA()}}const O=function(){return{width:"950px"}};function X(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"p-dialog",11),e.NdJ("visibleChange",function(i){return e.CHM(t),e.oxw().visibleDialog=i})("onHide",function(){return e.CHM(t),e.oxw().hideDialog()}),e.TgZ(2,"app-package-management",12),e.NdJ("updateList",function(){e.CHM(t);const i=e.oxw();return i.getPackagesList(i.invoiceCode)}),e.qZA(),e.YNc(3,j,1,0,"ng-template",8),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Akn(e.DdM(5,O)),e.Q6J("visible",t.visibleDialog)("modal",!0),e.xp6(1),e.Q6J("packageList",t.packageList)}}const K=[{path:"",component:(()=>{class n{constructor(t,a,i){this.appConfig=t,this.tableManagmentService=a,this.invoiceManagementService=i,this.visibleDialog=!1,this.buttonIsEnabled=!1,this.invoiceList=[],this.currentStep=-1,this.modalTitle="",this.page=this.appConfig.invoiceManagement,this.page=this.page.default,this.getInvoiceList(),this.tableManagmentService.buttonEvent.subscribe(p=>{this.selectedButton(p)})}ngOnInit(){}getInvoiceList(){var t=this;return(0,f.Z)(function*(){t.invoiceList=yield t.invoiceManagementService.getInvoices().toPromise().then(a=>a)})()}getPackagesList(t){var a=this;return(0,f.Z)(function*(){a.packageList=yield a.invoiceManagementService.getPackages(t).toPromise().then(i=>i)})()}buttonEnabled(t){this.buttonIsEnabled=t}selectedButton(t){switch(this.visibleDialog=!0,this.currentStep=t.buttonId,t.buttonId){case 1:console.log(t.rowData),this.child.updateForm(t.rowData);break;case 2:this.invoiceCode=t.rowData.invoice_number,this.getPackagesList(t.rowData.invoice_number)}}hideDialog(){this.visibleDialog=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b._),e.Y36(Z.l),e.Y36(m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-invoice-management"]],viewQuery:function(t,a){if(1&t&&e.Gf(C,5),2&t){let i;e.iGM(i=e.CRH())&&(a.child=i.first)}},decls:7,vars:7,consts:[[1,"row","p-5","m-0"],[1,"title"],[1,"pabiont-card"],[3,"headerList","customButtons","dataList","searchField","canCreate"],[4,"ngIf"],["header","Modificar estatus de Factura","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],[3,"buttonEnabled","updateList"],["child",""],["class","m-0","pTemplate","footer"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text","p-button-danger",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],["header","Modificar estatus de Paquetes","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],[3,"packageList","updateList"],["pButton","","pRipple","","label","Continuar","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Gesti\xf3n de Facturas y Paquetes"),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"app-basic-table",3),e.qZA()(),e.YNc(5,D,5,5,"div",4),e.YNc(6,X,4,6,"div",4)),2&t&&(e.xp6(4),e.Q6J("headerList",a.page.tableConfiguration.headerList)("customButtons",a.page.tableConfiguration.customButtons)("dataList",a.invoiceList)("searchField",a.page.tableConfiguration.searchField)("canCreate",!0),e.xp6(1),e.Q6J("ngIf",2!=a.currentStep),e.xp6(1),e.Q6J("ngIf",2==a.currentStep))},directives:[w.N,r.O5,x.V,C,M.jx,_.Hq,V],styles:[".title[_ngcontent-%COMP%]{font-weight:600;font-size:32px;line-height:27px;color:#000;margin-bottom:48px}.pabiont-card[_ngcontent-%COMP%]{border-radius:20px;border:2px solid rgba(0,0,0,.05);box-shadow:0 4px 4px #00000040}"]}),n})()}];let W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[v.Bz.forChild(K)],v.Bz]}),n})();var ee=c(732);let te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.ez,W,ee.T,_.hJ,h.j,x.S,l.UX,g.kW,s.U$,l.u5]]}),n})()}}]);