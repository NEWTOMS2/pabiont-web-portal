"use strict";(self.webpackChunkpabiont_web_portal=self.webpackChunkpabiont_web_portal||[]).push([[473],{473:(k,d,c)=>{c.r(d),c.d(d,{InvoiceManagementModule:()=>ct});var m=c(9808),g=c(7330),v=c(5861),t=c(5e3),p=c(3075);class f{constructor(o,e){this.invoice_number=o,this.status=e}}var s=c(4004),r=c(3447),h=c(6456);let _=(()=>{class n{constructor(e,a){this.httpService=e,this.appConfig=a}changeInvoice(e){return this.httpService.patch(`${this.appConfig.config.url.changeInvoice}`,e).pipe((0,s.U)(a=>a.data))}getInvoices(){return this.httpService.get(`${this.appConfig.config.url.getInvoice}`).pipe((0,s.U)(e=>e.data))}getPackages(e){return this.httpService.get(`${this.appConfig.config.url.getPackageByInvoice}${e}`).pipe((0,s.U)(a=>a.data))}changePackage(e){return this.httpService.patch(`${this.appConfig.config.url.changeStatusPackage}`,e).pipe((0,s.U)(a=>a.data))}createPackage(e){return this.httpService.post(`${this.appConfig.config.url.changeStatusPackage}`,e).pipe((0,s.U)(a=>a.data))}createInovice(e){return this.httpService.post(`${this.appConfig.config.url.postInvoice}`,e).pipe((0,s.U)(a=>a.data))}getLastInvoice(){return this.httpService.get(`${this.appConfig.config.url.getLastInvoice}`).pipe((0,s.U)(e=>e.data))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(r.O),t.LFG(h._))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=c(1424),b=c(4036);function Z(n,o){1&n&&(t.TgZ(0,"small",12),t._uU(1,"El estatus es obligatorio."),t.qZA())}const w=function(n){return{"ng-dirty ng-invalid":n}};let E=(()=>{class n{constructor(e,a){this.formBuilder=e,this.invoiceManagementService=a,this.statusList=[{label:"Pagada",value:11},{label:"Cancelada",value:12}],this.updateList=new t.vpe,this.buttonEnabled=new t.vpe,this.resetForm()}ngOnInit(){}resetForm(){this.formGroup=this.formBuilder.group({invoice_number:["",p.kI.required],date:["",p.kI.required],status:["",p.kI.required],name:["",p.kI.required]}),this.formGroup.statusChanges.subscribe(e=>{this.buttonEnabled.emit("VALID"==e)})}submit(){this.invoiceRow=new f(this.formGroup.controls.invoice_number.value,this.formGroup.controls.status.value.value),this.invoiceManagementService.changeInvoice(this.invoiceRow).subscribe(e=>{this.updateList.emit()},e=>{console.log(e)})}updateForm(e){console.log(e),this.formGroup.controls.status.setValue(this.statusList.find(a=>e.status==a.label)),this.formGroup.controls.invoice_number.setValue(e.invoice_number),this.formGroup.controls.date.setValue(e.date),this.formGroup.controls.name.setValue(e.name),this.formGroup.controls.invoice_number.disable(),this.formGroup.controls.date.disable(),this.formGroup.controls.name.disable()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.qu),t.Y36(_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-form"]],outputs:{updateList:"updateList",buttonEnabled:"buttonEnabled"},decls:20,vars:6,consts:[[3,"formGroup"],[1,"row","p-formgrid","p-grid","mt-3"],[1,"p-field","col-6"],["for","Invoice_number"],["type","text","id","Invoice_number","pInputText","","formControlName","invoice_number"],["for","Status"],["optionLabel","label","styleClass","w-100","appendTo","body","placeholder","Selecciona el Estatus","formControlName","status",3,"options","ngClass"],["class","p-error",4,"ngIf"],["for","Date"],["type","text","id","Fecha","pInputText","","formControlName","date"],["for","Name"],["type","text","id","Name","pInputText","","formControlName","name"],[1,"p-error"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4,"N\xfamero de Factura"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",2)(7,"label",5),t._uU(8,"Estatus"),t.qZA(),t._UZ(9,"p-dropdown",6),t.YNc(10,Z,2,0,"small",7),t.qZA()(),t.TgZ(11,"div",1)(12,"div",2)(13,"label",8),t._uU(14,"Fecha"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",2)(17,"label",10),t._uU(18,"Remitente"),t.qZA(),t._UZ(19,"input",11),t.qZA()()()),2&e&&(t.Q6J("formGroup",a.formGroup),t.xp6(9),t.Q6J("options",a.statusList)("ngClass",t.VKq(4,w,a.formGroup.controls.status.touched&&(null==a.formGroup.controls.status.errors?null:a.formGroup.controls.status.errors.required))),t.xp6(1),t.Q6J("ngIf",a.formGroup.controls.status.touched&&(null==a.formGroup.controls.status.errors?null:a.formGroup.controls.status.errors.required)))},directives:[p._Y,p.JL,p.sg,p.Fj,x.o,p.JJ,p.u,b.Lt,m.mk,m.O5],styles:[""]}),n})();var A=c(135),P=c(3833),T=c(5315),I=c(9783),C=c(845);class L{constructor(o,e){this.package_code=o,this.status=e}}var u=c(5516);function U(n,o){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Factura"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Tama\xf1o"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Peso"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Volumen"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Tipo de Env\xedo"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Estatus"),t.qZA(),t._UZ(13,"th",3),t.qZA())}function y(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw(2);t.hij(" ",e.invoice," ")}}function R(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw(2);t.hij(" ",e.invoice," ")}}function N(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.size," ")}}function F(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.size," ")}}function J(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.weight," ")}}function S(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.weight," ")}}function Y(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.volume," ")}}function D(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.volume," ")}}function B(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.type," ")}}function q(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.type," ")}}function G(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"p-dropdown",12),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().$implicit.status=i}),t.qZA()}if(2&n){const e=t.oxw().$implicit,a=t.oxw();t.Q6J("options",a.statusList)("ngModel",e.status)}}function $(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.status," ")}}function H(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().onRowEditInit(i)}),t.qZA()}}function O(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().onRowEditSave(i)}),t.qZA()}}function V(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),l=i.$implicit,M=i.rowIndex;return t.oxw().onRowEditCancel(l,M)}),t.qZA()}}function Q(n,o){if(1&n&&(t.TgZ(0,"tr",4)(1,"td",5)(2,"p-cellEditor"),t.YNc(3,y,1,1,"ng-template",6),t.YNc(4,R,1,1,"ng-template",7),t.qZA()(),t.TgZ(5,"td",5)(6,"p-cellEditor"),t.YNc(7,N,1,1,"ng-template",6),t.YNc(8,F,1,1,"ng-template",7),t.qZA()(),t.TgZ(9,"td",5)(10,"p-cellEditor"),t.YNc(11,J,1,1,"ng-template",6),t.YNc(12,S,1,1,"ng-template",7),t.qZA()(),t.TgZ(13,"td",5)(14,"p-cellEditor"),t.YNc(15,Y,1,1,"ng-template",6),t.YNc(16,D,1,1,"ng-template",7),t.qZA()(),t.TgZ(17,"td",5)(18,"p-cellEditor"),t.YNc(19,B,1,1,"ng-template",6),t.YNc(20,q,1,1,"ng-template",7),t.qZA()(),t.TgZ(21,"td",5)(22,"p-cellEditor"),t.YNc(23,G,1,2,"ng-template",6),t.YNc(24,$,1,1,"ng-template",7),t.qZA()(),t.TgZ(25,"td",8),t.YNc(26,H,1,0,"button",9),t.YNc(27,O,1,0,"button",10),t.YNc(28,V,1,0,"button",11),t.qZA()()),2&n){const a=o.editing;t.Q6J("pEditableRow",o.$implicit),t.xp6(26),t.Q6J("ngIf",!a),t.xp6(1),t.Q6J("ngIf",a),t.xp6(1),t.Q6J("ngIf",a)}}let j=(()=>{class n{constructor(e){this.invoiceManagementService=e,this.canEdit=!1,this.updateList=new t.vpe,this.statusList=[{label:"En Tienda",value:"En Tienda"},{label:"En Almac\xe9n",value:"En Almac\xe9n"},{label:"En Cami\xf3n",value:"En Cami\xf3n"},{label:"En Avi\xf3n",value:"En Avi\xf3n"},{label:"En Embarcaci\xf3n",value:"En Embarcaci\xf3n"},{label:"En el Puerto en Venezuela",value:"En el Puerto en Venezuela"},{label:"En Aduana en Venezuela",value:"En Aduana en Venezuela"},{label:"En Ruta al Almac\xe9n en Venezuela",value:"En Ruta al Almac\xe9n en Venezuela"},{label:"Entregado a Tienda en Venezuela",value:"Entregado a Tienda en Venezuela"},{label:"Entregado",value:"Entregado"}]}ngOnInit(){}onRowEditInit(e){this.canEdit=!0,console.log(e)}onRowEditSave(e){this.packageRow=new L(e.code,this.setStatusValue(e.status)),this.invoiceManagementService.changePackage(this.packageRow).subscribe(a=>{this.updateList.emit()},a=>{console.log(a)})}onRowEditCancel(e,a){window.location.reload()}setStatusValue(e){switch(e){case"En Tienda":return 1;case"En Almac\xe9n":return 2;case"En Cami\xf3n":return 3;case"En Avi\xf3n":return 4;case"En Embarcaci\xf3n":return 5;case"En el Puerto en Venezuela":return 6;case"En Aduana en Venezuela":return 7;case"En Ruta al Almac\xe9n en Venezuela":return 8;case"Entregado a Tienda en Venezuela":return 9;case"Entregado":return 10;default:return 0}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-package-management"]],inputs:{packageList:"packageList",invoice:"invoice"},outputs:{updateList:"updateList"},decls:4,vars:1,consts:[["dataKey","code","editMode","row",3,"value"],["pTemplate","header"],["pTemplate","body"],[2,"width","8rem"],[3,"pEditableRow"],["pEditableColumn",""],["pTemplate","input"],["pTemplate","output"],[2,"text-align","center"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success p-mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["styleClass","w-100","appendTo","body",3,"options","ngModel","ngModelChange"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","p-mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div")(1,"p-table",0),t.YNc(2,U,14,0,"ng-template",1),t.YNc(3,Q,29,4,"ng-template",2),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("value",a.packageList))},directives:[u.iA,I.jx,u.D$,u.Wq,u.YL,b.Lt,p.JJ,p.On,m.O5,C.Hq,u.Pv,u.U1,u.wT],styles:[""]}),n})();function z(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).hideDialog()}),t.qZA(),t.TgZ(1,"button",12),t.NdJ("click",function(){t.CHM(e),t.oxw();const i=t.MAs(3);return t.oxw().hideDialog(),i.submit()}),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",!e.buttonIsEnabled)}}const K=function(){return{width:"450px"}};function W(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"p-dialog",7),t.NdJ("visibleChange",function(i){return t.CHM(e),t.oxw().visibleDialog=i})("onHide",function(){return t.CHM(e),t.MAs(3).resetForm()}),t.TgZ(2,"app-create-form",8,9),t.NdJ("buttonEnabled",function(i){return t.CHM(e),t.oxw().buttonEnabled(i)})("updateList",function(){return t.CHM(e),t.oxw().getInvoiceList()}),t.qZA(),t.YNc(4,z,2,1,"ng-template",10),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(4,K)),t.Q6J("visible",e.visibleDialog)("modal",!0)}}function X(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).hideDialog()}),t.qZA()}}const tt=function(){return{width:"950px"}};function et(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"p-dialog",13),t.NdJ("visibleChange",function(i){return t.CHM(e),t.oxw().visibleDialog=i})("onHide",function(){return t.CHM(e),t.oxw().hideDialog()}),t.TgZ(2,"app-package-management",14),t.NdJ("updateList",function(){t.CHM(e);const i=t.oxw();return i.getPackagesList(i.invoiceCode)}),t.qZA(),t.YNc(3,X,1,0,"ng-template",10),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(6,tt)),t.Q6J("visible",e.visibleDialog)("modal",!0),t.xp6(1),t.Q6J("packageList",e.packageList)("invoice",e.invoiceCode)}}const nt=[{path:"",component:(()=>{class n{constructor(e,a,i,l){this.appConfig=e,this.tableManagmentService=a,this.invoiceManagementService=i,this.router=l,this.visibleDialog=!1,this.buttonIsEnabled=!1,this.invoiceList=[],this.currentStep=-1,this.modalTitle="",this.page=this.appConfig.invoiceManagement,this.page=this.page.default,this.getInvoiceList(),this.tableManagmentService.buttonEvent.subscribe(M=>{this.selectedButton(M)})}ngOnInit(){}getInvoiceList(){var e=this;return(0,v.Z)(function*(){e.invoiceList=yield e.invoiceManagementService.getInvoices().toPromise().then(a=>a)})()}getPackagesList(e){var a=this;return(0,v.Z)(function*(){a.packageList=yield a.invoiceManagementService.getPackages(e).toPromise().then(i=>i)})()}buttonEnabled(e){this.buttonIsEnabled=e}selectedButton(e){switch(this.visibleDialog=!0,this.currentStep=e.buttonId,e.buttonId){case 1:console.log(e.rowData),this.child.updateForm(e.rowData);break;case 2:this.invoiceCode=e.rowData.invoice_number,this.getPackagesList(e.rowData.invoice_number)}}hideDialog(){this.visibleDialog=!1,window.location.reload()}redirect(){this.router.navigate(["main"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h._),t.Y36(A.l),t.Y36(_),t.Y36(g.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-invoice-management"]],viewQuery:function(e,a){if(1&e&&t.Gf(E,5),2&e){let i;t.iGM(i=t.CRH())&&(a.child=i.first)}},decls:9,vars:7,consts:[[1,"row","p-5","m-0"],[1,"title"],[1,"pabiont-card"],[3,"headerList","customButtons","dataList","searchField","canCreate"],[4,"ngIf"],[1,"d-flex","justify-content-start","px-5","mb-3"],["pButton","","pRipple","","label","Volver",1,"p-button-outlined",3,"click"],["header","Modificar Estatus de Factura","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],[3,"buttonEnabled","updateList"],["child",""],["class","m-0","pTemplate","footer"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text","p-button-danger",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],["header","Modificar Estatus de Paquetes","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],[3,"packageList","invoice","updateList"],["pButton","","pRipple","","label","Continuar","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2,"Gesti\xf3n de Facturas y Paquetes"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"app-basic-table",3),t.qZA()(),t.YNc(5,W,5,5,"div",4),t.YNc(6,et,4,7,"div",4),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){return a.redirect()}),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("headerList",a.page.tableConfiguration.headerList)("customButtons",a.page.tableConfiguration.customButtons)("dataList",a.invoiceList)("searchField",a.page.tableConfiguration.searchField)("canCreate",!0),t.xp6(1),t.Q6J("ngIf",2!=a.currentStep),t.xp6(1),t.Q6J("ngIf",2==a.currentStep))},directives:[P.N,m.O5,T.V,E,I.jx,C.Hq,j],styles:[".title[_ngcontent-%COMP%]{font-weight:600;font-size:32px;line-height:27px;color:#000;margin-bottom:48px}.pabiont-card[_ngcontent-%COMP%]{border-radius:20px;border:2px solid rgba(0,0,0,.05);box-shadow:0 4px 4px #00000040}"]}),n})()}];let at=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(nt)],g.Bz]}),n})();var ot=c(732),it=c(8641);let ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,at,ot.T,C.hJ,x.j,T.S,p.UX,b.kW,u.U$,p.u5,it.R]]}),n})()},8641:(k,d,c)=>{c.d(d,{R:()=>s});var m=c(9808),g=c(845),v=c(3075),t=c(1424),p=c(7010),f=c(5e3);let s=(()=>{class r{}return r.\u0275fac=function(_){return new(_||r)},r.\u0275mod=f.oAB({type:r}),r.\u0275inj=f.cJS({imports:[[m.ez,g.hJ,t.j,p.L$,v.UX]]}),r})()}}]);