"use strict";(self.webpackChunkpabiont_web_portal=self.webpackChunkpabiont_web_portal||[]).push([[653],{5653:(Q,d,s)=>{s.r(d),s.d(d,{WarehouseManagementModule:()=>q});var p=s(9808),h=s(7330),T=s(5861),e=s(5e3),i=s(3075);class g{constructor(n,o,t,a){this.code=n,this.type=o,this.description=t,this.company=a}}var c=s(4004),W=s(3447),f=s(8622);let v=(()=>{class r{constructor(o,t){this.httpService=o,this.appConfig=t}saveWarehouse(o,t){return t?this.httpService.patch(`${this.appConfig.config.url.saveWarehouse}`,o).pipe((0,c.U)(a=>a.data)):this.httpService.post(`${this.appConfig.config.url.saveWarehouse}`,o).pipe((0,c.U)(a=>a.data))}getWarehouses(){return this.httpService.get(`${this.appConfig.config.url.getWarehouse}`).pipe((0,c.U)(o=>o.data))}}return r.\u0275fac=function(o){return new(o||r)(e.LFG(W.O),e.LFG(f._))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var b=s(1424),C=s(4036);function Z(r,n){1&r&&(e.TgZ(0,"small",11),e._uU(1,"El c\xf3digo es obligatorio."),e.qZA())}function L(r,n){1&r&&(e.TgZ(0,"small",11),e._uU(1,"El c\xf3digo no puede ser mayor a 3 caracteres."),e.qZA())}function _(r,n){1&r&&(e.TgZ(0,"small",11),e._uU(1,"El Tipo es obligatorio."),e.qZA())}function F(r,n){1&r&&(e.TgZ(0,"small",11),e._uU(1,"La descripci\xf3n es Obligatoria."),e.qZA())}const m=function(r){return{"ng-dirty ng-invalid":r}};let M=(()=>{class r{constructor(o,t){this.formBuilder=o,this.warehouseManagementService=t,this.typeList=[{label:"Almacen",value:"Almacen"},{label:"Localidad",value:"Localidad"}],this.isUpdate=!1,this.updateList=new e.vpe,this.buttonEnabled=new e.vpe,this.resetForm()}ngOnInit(){}resetForm(){this.formGroup=this.formBuilder.group({code:["",[i.kI.required,i.kI.maxLength(3)]],type:["",i.kI.required],description:["",i.kI.required]}),this.formGroup.statusChanges.subscribe(o=>{this.buttonEnabled.emit("VALID"==o)})}submit(){this.warehouseRow=this.isUpdate?new g(this.formGroup.controls.code.value,this.formGroup.controls.type.value.value,this.formGroup.controls.description.value):new g(this.formGroup.controls.code.value,this.formGroup.controls.type.value.value,this.formGroup.controls.description.value,1),console.log(this.warehouseRow),this.warehouseManagementService.saveWarehouse(this.warehouseRow,this.isUpdate).subscribe(o=>{console.log("exitoso"),this.updateList.emit()},o=>{console.log(o)})}updateForm(o){console.log(o),this.formGroup.controls.code.setValue(o.code),this.formGroup.controls.type.setValue(this.typeList.find(t=>o.type==t.value)),this.formGroup.controls.description.setValue(o.description),this.isUpdate=!0}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(i.qu),e.Y36(v))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-create-form"]],outputs:{updateList:"updateList",buttonEnabled:"buttonEnabled"},decls:18,vars:15,consts:[[3,"formGroup"],[1,"row","p-formgrid","p-grid","mt-3"],[1,"p-field","col-6"],["for","Code"],["type","text","id","Code","pInputText","","formControlName","code","required","","autofocus","",1,"uppercase",3,"ngClass"],["class","p-error",4,"ngIf"],["for","Type"],["optionLabel","label","styleClass","w-100","placeholder","Selecciona el Tipo","formControlName","type",3,"options","ngClass"],[1,"p-field","mt-3"],["for","Description"],["type","text","id","Description","pInputText","","formControlName","description","required","",3,"ngClass"],[1,"p-error"]],template:function(o,t){1&o&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),e._uU(4,"Codigo"),e.qZA(),e._UZ(5,"input",4),e.YNc(6,Z,2,0,"small",5),e.YNc(7,L,2,0,"small",5),e.qZA(),e.TgZ(8,"div",2)(9,"label",6),e._uU(10,"Tipo"),e.qZA(),e._UZ(11,"p-dropdown",7),e.YNc(12,_,2,0,"small",5),e.qZA()(),e.TgZ(13,"div",8)(14,"label",9),e._uU(15,"Descripci\xf3n"),e.qZA(),e._UZ(16,"input",10),e.YNc(17,F,2,0,"small",5),e.qZA()()),2&o&&(e.Q6J("formGroup",t.formGroup),e.xp6(5),e.Q6J("ngClass",e.VKq(9,m,t.formGroup.controls.code.touched&&(null==t.formGroup.controls.code.errors?null:t.formGroup.controls.code.errors.required))),e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.code.touched&&(null==t.formGroup.controls.code.errors?null:t.formGroup.controls.code.errors.required)),e.xp6(1),e.Q6J("ngIf",null==t.formGroup.controls.code.errors?null:t.formGroup.controls.code.errors.maxlength),e.xp6(4),e.Q6J("options",t.typeList)("ngClass",e.VKq(11,m,t.formGroup.controls.type.touched&&(null==t.formGroup.controls.type.errors?null:t.formGroup.controls.type.errors.required))),e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.type.touched&&(null==t.formGroup.controls.type.errors?null:t.formGroup.controls.type.errors.required)),e.xp6(4),e.Q6J("ngClass",e.VKq(13,m,t.formGroup.controls.description.touched&&(null==t.formGroup.controls.description.errors?null:t.formGroup.controls.description.errors.required))),e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.description.touched&&(null==t.formGroup.controls.description.errors?null:t.formGroup.controls.description.errors.required)))},directives:[i._Y,i.JL,i.sg,i.Fj,b.o,i.JJ,i.u,i.Q7,p.mk,p.O5,C.Lt],styles:[".uppercase[_ngcontent-%COMP%]{text-transform:uppercase}"]}),r})();var A=s(135),w=s(3833),y=s(5315),J=s(9783),G=s(845);function I(r,n){if(1&r){const o=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(o),e.oxw().hideDialog()}),e.qZA(),e.TgZ(1,"button",9),e.NdJ("click",function(){e.CHM(o);const a=e.oxw(),l=e.MAs(7);return a.hideDialog(),l.submit()}),e.qZA()}if(2&r){const o=e.oxw();e.xp6(1),e.Q6J("disabled",!o.buttonIsEnabled)}}const U=function(){return{width:"450px"}},E=[{path:"",component:(()=>{class r{constructor(o,t,a){this.appConfig=o,this.tableManagmentService=t,this.warehouseManagementService=a,this.visibleDialog=!1,this.buttonIsEnabled=!1,this.warehouseList=[],this.page=this.appConfig.warehouseManagement,this.page=this.page.default,this.getWarehouseList(),this.tableManagmentService.buttonEvent.subscribe(l=>{this.selectedButton(l)})}ngOnInit(){}getWarehouseList(){var o=this;return(0,T.Z)(function*(){o.warehouseList=yield o.warehouseManagementService.getWarehouses().toPromise().then(t=>t)})()}buttonEnabled(o){this.buttonIsEnabled=o}selectedButton(o){1===(this.visibleDialog=!0,o.buttonId)&&this.child.updateForm(o.rowData)}hideDialog(){this.visibleDialog=!1}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(f._),e.Y36(A.l),e.Y36(v))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-warehouse-management"]],viewQuery:function(o,t){if(1&o&&e.Gf(M,5),2&o){let a;e.iGM(a=e.CRH())&&(t.child=a.first)}},decls:9,vars:11,consts:[[1,"row","p-5","m-0"],[1,"title"],[1,"pabiont-card"],[3,"headerList","headerCustomButtons","customButtons","dataList","searchField","canCreate"],["header","Agregar Almacenes y localidades","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],[3,"buttonEnabled","updateList"],["child",""],["class","m-0","pTemplate","footer"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text","p-button-danger",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"disabled","click"]],template:function(o,t){if(1&o){const a=e.EpF();e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"Gestion de Almacenes y localidades"),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"app-basic-table",3),e.qZA()(),e.TgZ(5,"p-dialog",4),e.NdJ("visibleChange",function(u){return t.visibleDialog=u})("onHide",function(){return e.CHM(a),e.MAs(7).resetForm()}),e.TgZ(6,"app-create-form",5,6),e.NdJ("buttonEnabled",function(u){return t.buttonEnabled(u)})("updateList",function(){return t.getWarehouseList()}),e.qZA(),e.YNc(8,I,2,1,"ng-template",7),e.qZA()}2&o&&(e.xp6(4),e.Q6J("headerList",t.page.tableConfiguration.headerList)("headerCustomButtons",t.page.tableConfiguration.headerCustomButtons)("customButtons",t.page.tableConfiguration.customButtons)("dataList",t.warehouseList)("searchField",t.page.tableConfiguration.searchField)("canCreate",!0),e.xp6(1),e.Akn(e.DdM(10,U)),e.Q6J("visible",t.visibleDialog)("modal",!0))},directives:[w.N,y.V,M,J.jx,G.Hq],styles:[".title[_ngcontent-%COMP%]{font-weight:600;font-size:32px;line-height:27px;color:#000;margin-bottom:48px}.pabiont-card[_ngcontent-%COMP%]{border-radius:20px;border:2px solid rgba(0,0,0,.05);box-shadow:0 4px 4px #00000040}"]}),r})()}];let S=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[h.Bz.forChild(E)],h.Bz]}),r})();var B=s(732);let q=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[p.ez,S,B.T,G.hJ,b.j,y.S,i.UX,C.kW]]}),r})()}}]);