"use strict";(self.webpackChunkpabiont_web_portal=self.webpackChunkpabiont_web_portal||[]).push([[842],{9842:(T,d,c)=>{c.r(d),c.d(d,{InvoiceManagementModule:()=>at});var u=c(9808),m=c(7330),v=c(5861),t=c(5e3),l=c(3075);class b{constructor(a,e){this.invoice_number=a,this.status=e}}var _=c(8253),s=c(1424),g=c(4036);function f(n,a){1&n&&(t.TgZ(0,"small",12),t._uU(1,"El estatus es obligatorio."),t.qZA())}const Z=function(n){return{"ng-dirty ng-invalid":n}};let M=(()=>{class n{constructor(e,o){this.formBuilder=e,this.invoiceManagementService=o,this.statusList=[{label:"Pagada",value:11},{label:"Cancelada",value:12}],this.updateList=new t.vpe,this.buttonEnabled=new t.vpe,this.resetForm()}ngOnInit(){}resetForm(){this.formGroup=this.formBuilder.group({invoice_number:["",l.kI.required],date:["",l.kI.required],status:["",l.kI.required],name:["",l.kI.required]}),this.formGroup.statusChanges.subscribe(e=>{this.buttonEnabled.emit("VALID"==e)})}submit(){this.invoiceRow=new b(this.formGroup.controls.invoice_number.value,this.formGroup.controls.status.value.value),this.invoiceManagementService.changeInvoice(this.invoiceRow).subscribe(e=>{this.updateList.emit()},e=>{console.log(e)})}updateForm(e){console.log(e),this.formGroup.controls.status.setValue(this.statusList.find(o=>e.status==o.label)),this.formGroup.controls.invoice_number.setValue(e.invoice_number),this.formGroup.controls.date.setValue(e.date),this.formGroup.controls.name.setValue(e.name),this.formGroup.controls.invoice_number.disable(),this.formGroup.controls.date.disable(),this.formGroup.controls.name.disable()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(_.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-form"]],outputs:{updateList:"updateList",buttonEnabled:"buttonEnabled"},decls:20,vars:6,consts:[[3,"formGroup"],[1,"row","p-formgrid","p-grid","mt-3"],[1,"p-field","col-6"],["for","Invoice_number"],["type","text","id","Invoice_number","pInputText","","formControlName","invoice_number"],["for","Status"],["optionLabel","label","styleClass","w-100","appendTo","body","placeholder","Selecciona el Estatus","formControlName","status",3,"options","ngClass"],["class","p-error",4,"ngIf"],["for","Date"],["type","text","id","Fecha","pInputText","","formControlName","date"],["for","Name"],["type","text","id","Name","pInputText","","formControlName","name"],[1,"p-error"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4,"N\xfamero de Factura"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",2)(7,"label",5),t._uU(8,"Estatus"),t.qZA(),t._UZ(9,"p-dropdown",6),t.YNc(10,f,2,0,"small",7),t.qZA()(),t.TgZ(11,"div",1)(12,"div",2)(13,"label",8),t._uU(14,"Fecha"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",2)(17,"label",10),t._uU(18,"Remitente"),t.qZA(),t._UZ(19,"input",11),t.qZA()()()),2&e&&(t.Q6J("formGroup",o.formGroup),t.xp6(9),t.Q6J("options",o.statusList)("ngClass",t.VKq(4,Z,o.formGroup.controls.status.touched&&(null==o.formGroup.controls.status.errors?null:o.formGroup.controls.status.errors.required))),t.xp6(1),t.Q6J("ngIf",o.formGroup.controls.status.touched&&(null==o.formGroup.controls.status.errors?null:o.formGroup.controls.status.errors.required)))},directives:[l._Y,l.JL,l.sg,l.Fj,s.o,l.JJ,l.u,g.Lt,u.mk,u.O5],styles:[""]}),n})();var I=c(6456),k=c(135),w=c(3833),x=c(5315),E=c(9783),h=c(845);class A{constructor(a,e){this.package_code=a,this.status=e}}var r=c(4851);function P(n,a){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Factura"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Tama\xf1o"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Peso"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Volumen"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Tipo de Env\xedo"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Estatus"),t.qZA(),t._UZ(13,"th",3),t.qZA())}function L(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw(2);t.hij(" ",e.invoice," ")}}function R(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw(2);t.hij(" ",e.invoice," ")}}function y(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.size," ")}}function N(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.size," ")}}function U(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.weight," ")}}function F(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.weight," ")}}function J(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.volume," ")}}function D(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.volume," ")}}function Y(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.type," ")}}function q(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.type," ")}}function B(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-dropdown",12),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().$implicit.status=i}),t.qZA()}if(2&n){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("options",o.statusList)("ngModel",e.status)}}function G(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.status," ")}}function S(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onRowEditInit()}),t.qZA()}}function H(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().onRowEditSave(i)}),t.qZA()}}function V(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),p=i.$implicit,C=i.rowIndex;return t.oxw().onRowEditCancel(p,C)}),t.qZA()}}function O(n,a){if(1&n&&(t.TgZ(0,"tr",4)(1,"td",5)(2,"p-cellEditor"),t.YNc(3,L,1,1,"ng-template",6),t.YNc(4,R,1,1,"ng-template",7),t.qZA()(),t.TgZ(5,"td",5)(6,"p-cellEditor"),t.YNc(7,y,1,1,"ng-template",6),t.YNc(8,N,1,1,"ng-template",7),t.qZA()(),t.TgZ(9,"td",5)(10,"p-cellEditor"),t.YNc(11,U,1,1,"ng-template",6),t.YNc(12,F,1,1,"ng-template",7),t.qZA()(),t.TgZ(13,"td",5)(14,"p-cellEditor"),t.YNc(15,J,1,1,"ng-template",6),t.YNc(16,D,1,1,"ng-template",7),t.qZA()(),t.TgZ(17,"td",5)(18,"p-cellEditor"),t.YNc(19,Y,1,1,"ng-template",6),t.YNc(20,q,1,1,"ng-template",7),t.qZA()(),t.TgZ(21,"td",5)(22,"p-cellEditor"),t.YNc(23,B,1,2,"ng-template",6),t.YNc(24,G,1,1,"ng-template",7),t.qZA()(),t.TgZ(25,"td",8),t.YNc(26,S,1,0,"button",9),t.YNc(27,H,1,0,"button",10),t.YNc(28,V,1,0,"button",11),t.qZA()()),2&n){const o=a.editing;t.Q6J("pEditableRow",a.$implicit),t.xp6(26),t.Q6J("ngIf",!o),t.xp6(1),t.Q6J("ngIf",o),t.xp6(1),t.Q6J("ngIf",o)}}let Q=(()=>{class n{constructor(e){this.invoiceManagementService=e,this.canEdit=!1,this.updateList=new t.vpe,this.statusList=[{label:"En Tienda",value:"En Tienda"},{label:"En Almac\xe9n",value:"En Almac\xe9n"},{label:"En Cami\xf3n",value:"En Cami\xf3n"},{label:"En Avi\xf3n",value:"En Avi\xf3n"},{label:"En Embarcaci\xf3n",value:"En Embarcaci\xf3n"},{label:"En el Puerto en Venezuela",value:"En el Puerto en Venezuela"},{label:"En Aduana en Venezuela",value:"En Aduana en Venezuela"},{label:"En Ruta al Almac\xe9n en Venezuela",value:"En Ruta al Almac\xe9n en Venezuela"},{label:"Entregado a Tienda en Venezuela",value:"Entregado a Tienda en Venezuela"},{label:"Entregado",value:"Entregado"}]}ngOnInit(){}onRowEditInit(){this.canEdit=!0}onRowEditSave(e){this.packageRow=new A(parseInt(e.code),this.setStatusValue(e.status)),this.invoiceManagementService.changePackage(this.packageRow).subscribe(o=>{this.updateList.emit()},o=>{console.log(o)})}onRowEditCancel(e,o){window.location.reload()}setStatusValue(e){switch(e){case"En Tienda":return 1;case"En Almac\xe9n":return 2;case"En Cami\xf3n":return 3;case"En Avi\xf3n":return 4;case"En Embarcaci\xf3n":return 5;case"En el Puerto en Venezuela":return 6;case"En Aduana en Venezuela":return 7;case"En Ruta al Almac\xe9n en Venezuela":return 8;case"Entregado a Tienda en Venezuela":return 9;case"Entregado":return 10;default:return 0}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-package-management"]],inputs:{packageList:"packageList",invoice:"invoice"},outputs:{updateList:"updateList"},decls:4,vars:1,consts:[["dataKey","code","editMode","row",3,"value"],["pTemplate","header"],["pTemplate","body"],[2,"width","8rem"],[3,"pEditableRow"],["pEditableColumn",""],["pTemplate","input"],["pTemplate","output"],[2,"text-align","center"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success p-mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["styleClass","w-100","appendTo","body",3,"options","ngModel","ngModelChange"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","p-mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"p-table",0),t.YNc(2,P,14,0,"ng-template",1),t.YNc(3,O,29,4,"ng-template",2),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("value",o.packageList))},directives:[r.iA,E.jx,r.D$,r.Wq,r.YL,g.Lt,l.JJ,l.On,u.O5,h.Hq,r.Pv,r.U1,r.wT],styles:[""]}),n})();function j(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).hideDialog()}),t.qZA(),t.TgZ(1,"button",12),t.NdJ("click",function(){t.CHM(e),t.oxw();const i=t.MAs(3);return t.oxw().hideDialog(),i.submit()}),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",!e.buttonIsEnabled)}}const z=function(){return{width:"450px"}};function $(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"p-dialog",7),t.NdJ("visibleChange",function(i){return t.CHM(e),t.oxw().visibleDialog=i})("onHide",function(){return t.CHM(e),t.MAs(3).resetForm()}),t.TgZ(2,"app-create-form",8,9),t.NdJ("buttonEnabled",function(i){return t.CHM(e),t.oxw().buttonEnabled(i)})("updateList",function(){return t.CHM(e),t.oxw().getInvoiceList()}),t.qZA(),t.YNc(4,j,2,1,"ng-template",10),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(4,z)),t.Q6J("visible",e.visibleDialog)("modal",!0)}}function K(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).hideDialog()}),t.qZA()}}const W=function(){return{width:"950px"}};function X(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"p-dialog",13),t.NdJ("visibleChange",function(i){return t.CHM(e),t.oxw().visibleDialog=i})("onHide",function(){return t.CHM(e),t.oxw().hideDialog2()}),t.TgZ(2,"app-package-management",14),t.NdJ("updateList",function(){t.CHM(e);const i=t.oxw();return i.getPackagesList(i.invoiceCode)}),t.qZA(),t.YNc(3,K,1,0,"ng-template",10),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(6,W)),t.Q6J("visible",e.visibleDialog)("modal",!0),t.xp6(1),t.Q6J("packageList",e.packageList)("invoice",e.invoiceCode)}}const tt=[{path:"",component:(()=>{class n{constructor(e,o,i,p){this.appConfig=e,this.tableManagmentService=o,this.invoiceManagementService=i,this.router=p,this.visibleDialog=!1,this.buttonIsEnabled=!1,this.invoiceList=[],this.currentStep=-1,this.modalTitle="",this.page=this.appConfig.invoiceManagement,this.page=this.page.default,this.getInvoiceList(),this.tableManagmentService.buttonEvent.subscribe(C=>{this.selectedButton(C)})}ngOnInit(){}getInvoiceList(){var e=this;return(0,v.Z)(function*(){e.invoiceList=yield e.invoiceManagementService.getInvoices().toPromise().then(o=>o)})()}getPackagesList(e){var o=this;return(0,v.Z)(function*(){o.packageList=yield o.invoiceManagementService.getPackages(e).toPromise().then(i=>i)})()}buttonEnabled(e){this.buttonIsEnabled=e}selectedButton(e){switch(this.visibleDialog=!0,this.currentStep=e.buttonId,e.buttonId){case 1:this.child.updateForm(e.rowData);break;case 2:this.invoiceCode=e.rowData.invoice_number,this.getPackagesList(e.rowData.invoice_number)}}hideDialog(){this.visibleDialog=!1}hideDialog2(){this.visibleDialog=!1,window.location.reload()}redirect(){this.router.navigate(["main"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(I._),t.Y36(k.l),t.Y36(_.d),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-invoice-management"]],viewQuery:function(e,o){if(1&e&&t.Gf(M,5),2&e){let i;t.iGM(i=t.CRH())&&(o.child=i.first)}},decls:9,vars:7,consts:[[1,"row","p-5","m-0"],[1,"title"],[1,"pabiont-card"],[3,"headerList","customButtons","dataList","searchField","canCreate"],[4,"ngIf"],[1,"d-flex","justify-content-start","px-5","mb-3"],["pButton","","pRipple","","label","Volver",1,"p-button-outlined",3,"click"],["header","Modificar Estatus de Factura","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],[3,"buttonEnabled","updateList"],["child",""],["class","m-0","pTemplate","footer"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text","p-button-danger",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],["header","Modificar Estatus de Paquetes","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],[3,"packageList","invoice","updateList"],["pButton","","pRipple","","label","Continuar","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2,"Gesti\xf3n de Facturas y Paquetes"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"app-basic-table",3),t.qZA()(),t.YNc(5,$,5,5,"div",4),t.YNc(6,X,4,7,"div",4),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){return o.redirect()}),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("headerList",o.page.tableConfiguration.headerList)("customButtons",o.page.tableConfiguration.customButtons)("dataList",o.invoiceList)("searchField",o.page.tableConfiguration.searchField)("canCreate",!0),t.xp6(1),t.Q6J("ngIf",2!=o.currentStep),t.xp6(1),t.Q6J("ngIf",2==o.currentStep))},directives:[w.N,u.O5,x.V,M,E.jx,h.Hq,Q],styles:[".title[_ngcontent-%COMP%]{font-weight:600;font-size:32px;line-height:27px;color:#000;margin-bottom:48px}.pabiont-card[_ngcontent-%COMP%]{border-radius:20px;border:2px solid rgba(0,0,0,.05);box-shadow:0 4px 4px #00000040}"]}),n})()}];let et=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(tt)],m.Bz]}),n})();var nt=c(732),ot=c(8641);let at=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,et,nt.T,h.hJ,s.j,x.S,l.UX,g.kW,r.U$,l.u5,ot.R]]}),n})()},8641:(T,d,c)=>{c.d(d,{R:()=>_});var u=c(9808),m=c(845),v=c(3075),t=c(1424),l=c(7010),b=c(5e3);let _=(()=>{class s{}return s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({imports:[[u.ez,m.hJ,t.j,l.L$,v.UX]]}),s})()}}]);